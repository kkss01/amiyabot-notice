> 防止用户使用兔兔刷屏, 或减小服务器压力
- <font color=green>2.0: 支持拦截不带前缀的指令, 增加群聊频率限制<br>
&nbsp; 迁移配置到控制台, 原配置文件仍保留</font><br>

##

- 使用类令牌桶算法, 无窗口期/重置点
- 各用户/群聊独立冷却, 互不影响
- 因`等待用户回复`触发的功能不会计入冷却次数

## 配置说明

### 白名单: 
- 群号白名单: 相当于在该群关闭本插件
- 用户白名单: 白名单用户既不会受到个人限制, 也不参与群聊冷却计数
- 超管白名单: 将所有超管添加到用户白名单

### 用户/群聊参数:
- 最小稳定间隔: 决定一个用户/群长时间连续呼叫时, 不触发冷却的最小间隔
<br>&emsp; 如果要防止长时间连续回复消息, 则**增加**此值
- 最大瞬时次数: 决定一个用户/群在一瞬间内, 最大连续响应的次数
<br>&emsp; 如果要防止短时间内回复消息数太多, 则**减小**此值
- 将以上两个值设为 0 可关闭用户或群的响应频率限制
- 基准冷却时间: 根据该用户/群上一次的响应时间, 动态调整冷却时间

### 冷却提示
- 使用 `time%` 来替换剩余冷却时间
- 使用 `\n` 来换行; 使用 `\\n` 来表示 '\n' 本身


## 其他说明
- 本插件无法在功能列表中关闭 (没有效果), 要关闭插件, 请使用群聊白名单
- 用户限制优先于群聊限制, 当一条消息同时触发两个限制时, 会触发用户冷却

## 配置

> 前往 [插件管理-响应频率限制-插件配置](https://console.amiyabot.com/#/plugin) 修改 <br>
> 原配置文件: `resource/plugins/callLimitConfig.yaml` <br>
> 配置实时更新，无需重启bot

- 可先使用默认配置, 一段时间后再视情况调整
- 默认配置的近似效果: 
   - 某个用户125秒内 连续呼叫4次后, 将进入120秒冷却, 期间兔兔不会响应这个用户的指令
   - 某个群聊在200秒内 由**不同的用户**连续呼叫8次后, 将进入30秒冷却, 期间兔兔不会响应这个群聊的指令

---
   问题反馈：在 [Amiya的测试工坊—插件开发&使用交流](https://qun.qq.com/qqweb/qunpro/share?_wv=3&_wwv=128&appChannel=share&inviteCode=1XqeeRDjEVa&from=246610&biz=ka#/pc) 中@.Tdp


| 版本  | 变更                             
|-------|-----------------------------------
| 2.3   | 冷却提示支持换行符               
| 2.2   | 修复将下班群消息计入冷却                
| 2.1   | 修复将黑名单用户计入冷却                
| 2.0.1 | 紧急避险: ChatGPT插件导致所有消息被计数                
| 2.0   | 重构插件; 重制图标; 迁移配置到控制台<br>支持拦截不带前缀的指令<br>支持群聊频率限制<br>支持用户/群聊白名单<br>代理控制参数; 动态调整冷却时间


| 版本   | 变更                             
|-------|-----------------------------------
| 1.1.6 | 超管不会被限制               
| 1.1.5 | 修复无法安装               
| 1.1.3 | 支持自定义回复词                 
| 1.1   | 添加文档, 优化代码                 
| 1.0   | 添加唤起频率限制功能               

